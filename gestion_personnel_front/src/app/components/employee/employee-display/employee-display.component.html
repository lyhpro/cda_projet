<section>
    <h1>Affichage des heures pour l'employé {{employee.secondname}} {{employee.firstname}}</h1>
    
    <div>
        <button class="btn btn-success custom-table-btn" (click)="goToSpecialDay('vacance')">Ajout jour conge</button>
        <button class="btn btn-success custom-table-btn" (click)="goToSpecialDay('rtt')">Ajout jour rtt</button>
        <button class="btn btn-success custom-table-btn" (click)="goToSpecialDay('maladie')">Ajout jour maladie</button>
    </div>

    <form [formGroup]="form">
        <label for="year">Année : </label>
        <select class="form-select custom-form-input" formControlName="year">
            <option value=0 disabled selected>Sélectionner une année</option>
            @for (year of years; track $index) {
                <option [ngValue]="year.id">{{year.value}}</option>
            }
        </select>
        <label for="month">Mois : </label>
        <select class="form-select custom-form-input" formControlName="month">
            <option value=0 disabled selected>Sélectionner un mois</option>
            @for (month of months; track $index) {
                <option [ngValue]="month.id">{{month.name}}</option>
            }
        </select>
    </form>

    @if(recordings.length != 0) {
        <table class="table table-striped custom-table">
            <thead>
              <tr>
                <th class="custom-table-col-title" scope="col">Date</th>
                <th class="custom-table-col-title" scope="col">Journée</th>
                <th class="custom-table-col-title" scope="col">Heure de début</th>
                <th class="custom-table-col-title" scope="col">Heure de fin</th>
                <th class="custom-table-col-title" scope="col">Heure de pause</th>
                <th class="custom-table-col-title" scope="col">Heure de fin de pause</th>
                <th class="custom-table-col-title" scope="col">Heure total</th>
                <th class="custom-table-col-title" scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
                @for (recording of recordings; track $index) {
                    <tr>
                        <td class="custom-table-col-content">{{recording.date}}</td>
                        <td class="custom-table-col-content">{{loadDayType(recording.dayTypeId)}}</td>
                        <td class="custom-table-col-content">{{recording.hourStart | hoursFormat}}</td>
                        <td class="custom-table-col-content">{{recording.hourStop | hoursFormat}}</td>
                        <td class="custom-table-col-content">{{recording.breakStart | hoursFormat}}</td>
                        <td class="custom-table-col-content">{{recording.breakStop | hoursFormat}}</td>
                        <td class="custom-table-col-content">{{recording.totalHours | durationsFormat}}</td>
                        <td class="custom-table-col-content">
                          <button class="btn btn-success custom-table-btn">Consulter</button>
                        </td>
                    </tr>
                    
                }
            </tbody>
        </table>

        <br>
        <br>
        <table class="table table-striped custom-table">
            <thead>
                <tr>
                    <th class="custom-table-col-title" scope="col">Type de journée</th>
                    <th class="custom-table-col-title" scope="col">Année : {{displayYearValue(form.value.year)}}</th>
                    <th class="custom-table-col-title" scope="col">Mois : {{displayMonthName(form.value.month)}}</th>
                </tr>
            </thead>
            <tbody>
                @for (nbDay of nbSpecialDays; track nbDay) {
                    <tr>
                        <td class="custom-table-col-content">{{nbDay}}</td>
                        <td class="custom-table-col-content">{{nbDay[0]}}</td>
                        <td class="custom-table-col-content">{{nbDay[1]}}</td>
                    </tr>
                }
            </tbody>
        </table>
    }

</section>